<head>
    <!-- Updated title for the tool -->
    <title>Klarna Payments Preview Tool</title>
    <style>
      /* Reset box-sizing for consistent layouts */
      html {
        box-sizing: border-box;
      }
      *, *:before, *:after {
        box-sizing: inherit;
      }

      /* Windows 95 base styling */
      body {
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
        font-size: 12px;
        margin: 0;
        background-color: #008080;
      }

      /* Main container with Windows 95 window styling */
      .page-wrapper {
        max-width: 95rem;
        margin: 1em auto;
        padding: 0;
        background-color: #c0c0c0;
        border: 2px solid;
        border-top-color: #dfdfdf;
        border-left-color: #dfdfdf;
        border-right-color: #7b7b7b;
        border-bottom-color: #7b7b7b;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
      }

      /* Windows 95 title bar */
      .title-bar {
        background: #000080;
        color: white;
        padding: 2px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: bold;
        font-size: 11px;
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
      }

      .title-bar-text {
        display: flex;
        align-items: center;
        gap: 6px;
        padding-left: 2px;
      }

      .title-bar-icon {
        width: 16px;
        height: 16px;
        background: #FFB3C7; /* Klarna pink */
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .title-bar-icon img {
        width: 16px;
        height: 16px;
        object-fit: contain;
      }

      .title-bar-controls {
        display: flex;
        gap: 2px;
      }

      .title-bar-button {
        width: 16px;
        height: 14px;
        background: #c0c0c0;
        border: 1px solid;
        border-top-color: #dfdfdf;
        border-left-color: #dfdfdf;
        border-right-color: #000000;
        border-bottom-color: #000000;
        position: relative;
        padding: 0;
      }

      .title-bar-button:active {
        border-top-color: #000000;
        border-left-color: #000000;
        border-right-color: #dfdfdf;
        border-bottom-color: #dfdfdf;
      }

      .title-bar-button::before {
        content: '';
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }

      .title-bar-button.minimize::before {
        width: 8px;
        height: 2px;
        background: #000000;
        bottom: 3px;
      }

      .title-bar-button.maximize::before {
        width: 8px;
        height: 8px;
        border: 1px solid #000000;
      }

      .title-bar-button.close::before {
        width: 8px;
        height: 7px;
        background: linear-gradient(45deg, 
          transparent 0%, transparent 43%, 
          black 45%, black 55%, 
          transparent 57%, transparent 100%), 
        linear-gradient(-45deg, 
          transparent 0%, transparent 43%, 
          black 45%, black 55%, 
          transparent 57%, transparent 100%);
      }

      /* Content area with padding */
      .window-content {
        padding: 0.5rem;
      }

      /* Remove the old h1 styles since we're using title bar now */
      h1 {
        display: none;
      }

      /* Klarna payments container styling */
      #klarna-payments-container {
        width: 100%;
        min-height: 3rem;
        padding: 0.5rem;
        background: white;
        border: 2px solid;
        border-left-color: #7b7b7b;
        border-top-color: #7b7b7b;
        border-right-color: #dfdfdf;
        border-bottom-color: #dfdfdf;
        margin-bottom: 2rem;
      }

      /* Grid layout for the three-column structure */
      .container {
        display: grid;
        grid-template-columns: 25% 25% 48%;
        grid-template-rows: auto;
        gap: 0.75em;
      }

      /* Individual panel styling */
      .item {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
        padding: 0.4rem;
        background-color: #c0c0c0;
        border: 2px solid;
        border-top-color: #dfdfdf;
        border-left-color: #dfdfdf;
        border-right-color: #7b7b7b;
        border-bottom-color: #7b7b7b;
      }

      /* Section headers */
      h3 {
        margin: 0;
        font-size: 1rem;
      }

      /* Code and results display area */
      pre {
        white-space: pre-wrap;
        background: white;
        margin: 0;
        transition: box-shadow 0.15s ease;
        border: 2px solid;
        border-left-color: #7b7b7b;
        border-top-color: #7b7b7b;
        border-right-color: #dfdfdf;
        border-bottom-color: #dfdfdf;
        padding: 0.5rem;
      }

      /* Highlight effect for updated results */
      .updated {
        box-shadow: 0 0 0.5rem 0.25rem rgba(0, 0, 128, 0.5);
      }

      /* Form input styling */
      textarea, input {
        width: 100%;
        min-height: 4rem;
        background: white;
        border: 2px solid;
        border-left-color: #7b7b7b;
        border-top-color: #7b7b7b;
        border-right-color: #dfdfdf;
        border-bottom-color: #dfdfdf;
        padding: 0.2rem;
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
        font-size: 11px;
      }

      input {
        min-height: auto;
      }

      /* Windows 95 style buttons - updated for bigger CTAs */
      button {
        background-color: #c0c0c0;
        border-width: 2px;
        border-style: solid;
        border-color: #ffffff #808080 #808080 #ffffff;
        padding: 0 16px;
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
        font-size: 13px;
        font-weight: bold;
        cursor: pointer;
        position: relative;
        min-width: 100px;
        height: 32px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin: 8px 0;
        /* Classic Windows 95 button effect */
        box-shadow: inset 1px 1px 0px 1px #ffffff,
                    inset -1px -1px 0px 1px #000000;
        text-transform: uppercase;
      }

      /* Button press effect - more authentic Windows 95 */
      button:active {
        border-color: #808080 #ffffff #ffffff #808080;
        padding: 1px 15px 0 17px;
        /* Invert the shadow effect when pressed */
        box-shadow: inset -1px -1px 0px 1px #ffffff,
                    inset 1px 1px 0px 1px #000000;
      }

      /* Button focus/hover effect */
      button:focus {
        outline: 1px dotted #000000;
        outline-offset: -4px;
      }

      /* Keep title bar buttons with their special styling */
      .title-bar-button {
        min-width: auto;
        width: 16px;
        height: 14px;
        border-width: 1px;
        box-shadow: none;
        padding: 0;
        margin: 0;
        font-size: 12px;
        font-weight: normal;
        text-transform: none;
      }

      .title-bar-button:active {
        padding: 1px 0 0 1px;
        box-shadow: none;
      }

      .title-bar-button:focus {
        outline: none;
      }

      /* Add this new CSS */
      .stat-counter {
        display: flex;
        justify-content: center;
        padding: 1rem;
        margin-top: 1rem;
        border-top: 2px solid #808080;
      }

      /* Example selector buttons */
      .example-buttons {
        display: flex;
        flex-wrap: wrap; /* Allow buttons to wrap */
        gap: 4px;
        margin-bottom: 1rem;
      }

      .example-button {
        background-color: #c0c0c0;
        border-width: 2px;
        border-style: solid;
        border-color: #ffffff #808080 #808080 #ffffff;
        padding: 0 8px;
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
        font-size: 11px;
        cursor: pointer;
        height: 24px;
        min-width: 40px; /* Reduce minimum width */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: inset 1px 1px 0px 1px #ffffff,
                    inset -1px -1px 0px 1px #000000;
        margin: 0; /* Remove margin */
        text-transform: none; /* Remove uppercase */
        font-weight: normal; /* Remove bold */
      }

      .example-button.active {
        background-color: #808080;
        border-color: #808080 #ffffff #ffffff #808080;
        box-shadow: inset -1px -1px 0px 1px #ffffff,
                    inset 1px 1px 0px 1px #000000;
      }

      /* Make the example pre smaller */
      #auth-data-example {
        max-height: 400px;
        overflow-y: auto;
        font-size: 9px;
        width: 100%;
        overflow-x: auto;
      }

      /* Make the results pre taller to match */
      #init-results, #load-results, #authorize-results {
        min-height: 100px;
      }

      /* Add these media queries at the end of your CSS */
      @media screen and (max-width: 1024px) {
        .page-wrapper {
          margin: 0.5em;
          max-width: 100%;
        }

        .container {
          grid-template-columns: 1fr; /* Stack columns on mobile */
          gap: 0.5em;
        }

        /* Make buttons more touchable on mobile */
        button {
          min-height: 44px; /* Better touch target */
          width: 100%; /* Full width buttons */
          margin: 4px 0;
        }

        .example-buttons {
          flex-wrap: wrap; /* Allow buttons to wrap */
          gap: 4px;
        }

        .example-button {
          flex: 1; /* Make buttons fill space evenly */
          min-height: 32px; /* Better touch target */
        }

        /* Adjust font sizes for mobile */
        body {
          font-size: 14px; /* Slightly larger base font */
        }

        #auth-data-example {
          font-size: 11px; /* Larger code font */
          max-height: 300px; /* Shorter on mobile */
        }

        /* Adjust input and textarea sizing */
        textarea, input {
          font-size: 16px; /* Prevent iOS zoom on focus */
          padding: 0.5rem;
        }

        /* Make the title bar more mobile-friendly */
        .title-bar {
          padding: 4px;
        }

        .title-bar-button {
          width: 24px; /* Larger touch targets */
          height: 24px;
        }
      }

      /* Additional adjustments for very small screens */
      @media screen and (max-width: 480px) {
        .page-wrapper {
          margin: 0; /* Full width on small screens */
        }

        .window-content {
          padding: 0.25rem;
        }

        .item {
          padding: 0.5rem;
        }

        /* Stack country buttons on very small screens */
        .example-buttons {
          flex-direction: column;
        }

        .example-button {
          width: 100%;
        }
      }

      /* Update the code container styles */
      .code-container {
        position: relative;
        background: #c0c0c0;
        border: 2px solid;
        border-top-color: #dfdfdf;
        border-left-color: #dfdfdf;
        border-right-color: #808080;
        border-bottom-color: #808080;
        margin-top: 0.5rem;
        width: 100%;
      }

      .code-header {
        background: #000080;
        padding: 3px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .copy-button {
        background-color: #c0c0c0;
        border: 2px solid;
        border-color: #dfdfdf #808080 #808080 #dfdfdf;
        padding: 2px 8px;
        font-size: 11px;
        height: 20px;
        min-width: auto;
        margin: 0;
        text-transform: none;
        font-weight: normal;
      }

      .code-content {
        display: flex;
        border: 2px solid;
        border-color: #808080 #dfdfdf #dfdfdf #808080;
        margin: 2px;
        font-family: Consolas, "Courier New", monospace;
        background: #ffffff;
        width: 100%;
        overflow: visible;
      }

      .line-numbers {
        padding: 4px 8px;
        background: #c0c0c0;
        color: #000000;
        text-align: right;
        user-select: none;
        border-right: 1px solid #808080;
        font-family: Consolas, "Courier New", monospace;
        font-size: 11px;
        min-width: 2.5em;
        line-height: 1.5;
        white-space: pre;
      }

      #auth-data-example {
        margin: 0;
        padding: 4px 8px;
        color: #000000;
        font-family: Consolas, "Courier New", monospace;
        font-size: 11px;
        white-space: pre-wrap;
        flex-grow: 1;
        border-left: 1px solid #dfdfdf;
        line-height: 1.5;
        overflow: visible;
        max-height: none;
      }

      /* Add this CSS for the SDK operation name */
      .sdk-operation {
        background: #000080;
        color: white;
        padding: 2px 4px;
        font-size: 11px;
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
        margin-bottom: 2px;
      }

      /* Update the request pre styling */
      .request-container {
        border: 2px solid;
        border-color: #808080 #dfdfdf #dfdfdf #808080;
        background: #ffffff;
        margin-bottom: 1rem;
      }

      .request-content {
        margin: 0;
        padding: 4px 8px;
        font-family: Consolas, "Courier New", monospace;
        font-size: 11px;
        white-space: pre-wrap;
        word-break: break-word;
        min-height: 100px; /* Match the minimum height */
        max-height: 200px; /* Set maximum height */
        overflow-y: auto; /* Add scroll if content is too long */
      }

      /* Update the SDK operation header */
      .sdk-operation {
        background: #000080;
        color: white;
        padding: 2px 4px;
        font-size: 11px;
        font-family: "Microsoft Sans Serif", "MS Sans Serif", "Pixelated MS Sans Serif", sans-serif;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    </style>
  </head>
  <body>
    <div class="page-wrapper">
      <!-- Windows 95 title bar -->
      <div class="title-bar">
        <div class="title-bar-text">
          <div class="title-bar-icon">
            <img src="klarna_logo.png" alt="Klarna" />
          </div>
          Klarna Payments Preview Tool
        </div>
        <div class="title-bar-controls">
          <button class="title-bar-button minimize"></button>
          <button class="title-bar-button maximize"></button>
          <button class="title-bar-button close"></button>
        </div>
      </div>

      <!-- Window content -->
      <div class="window-content">
        <div class="container">    
          <!-- Initialize Klarna Payments section -->
          <div class="item">
            <h3>init</h3>
            client_token: 
            <textarea id="client-token"></textarea>
            <button type="button" id="init">init</button>
          </div>
          <div class="item">
            <h3>request</h3>
            <div class="request-container">
              <div class="sdk-operation">Klarna.Payments.init(options)</div>
              <pre id="init-request" class="request-content"></pre>
            </div>
            <h3>response</h3>
            <div class="request-container">
              <div class="sdk-operation">Response</div>
              <pre id="init-results" class="request-content"></pre>
            </div>
          </div>
          <div class="item">
            <h3>notes</h3>
            Pass the client_token from the Create Session response. <a href="https://docs.klarna.com/payments/web-payments/integrate-with-klarna-payments/step-2-checkout/" target="_blank" style="color: #000080;">More info</a>.
          </div>
  
          <!-- Load payment methods section -->
          <div class="item">
            <h3>load</h3>
            payment_method_category (optional): 
            <input type="text" id="load-payment-method-category"></textarea>
            session data (optional):
            <textarea id="optional-load-session-data"></textarea>
            <button type="button" id="load">load</button>
          </div>
          <div class="item">
            <h3>request</h3>
            <div class="request-container">
              <div class="sdk-operation">Klarna.Payments.load(options, session_data, callback)</div>
              <pre id="load-request" class="request-content"></pre>
            </div>
            <h3>response</h3>
            <div class="request-container">
              <div class="sdk-operation">Response</div>
              <pre id="load-results" class="request-content"></pre>
            </div>
          </div>
          <div class="item">
            <h3>notes</h3>
            category example:
            pay_over_time, pay_later, pay_now
          </div>
  
          <!-- Move Klarna payments container here -->
          <div class="item" style="grid-column: 1 / -1;">
            <h3>klarna-payments-container:</h3>
            <div id="klarna-payments-container"></div>
          </div>
  
          <!-- Authorization section -->
          <div class="item">
            <h3>authorize</h3>
            payment_method_category (optional):
            <input type="text" id="authorize-payment-method-category"></textarea>
            session data (optional):
            <textarea id="optional-authorize-session-data"></textarea>
            <button type="button" id="authorize">authorize</button>
          </div>
          <div class="item">
            <h3>request</h3>
            <div class="request-container">
              <div class="sdk-operation">Klarna.Payments.authorize(options, session_data, callback)</div>
              <pre id="authorize-request" class="request-content"></pre>
            </div>
            <h3>response</h3>
            <div class="request-container">
              <div class="sdk-operation">Response</div>
              <pre id="authorize-results" class="request-content"></pre>
            </div>
          </div>
          <div class="item">
            <h3>notes</h3>
            category: should be the same as in load according to docs<br />
            <h3>session data examples:</h3>
            <div class="example-buttons">
              <button class="example-button active" data-country="IT">IT</button>
              <button class="example-button" data-country="US">US</button>
              <button class="example-button" data-country="GB">GB</button>
              <button class="example-button" data-country="SE">SE</button>
              <button class="example-button" data-country="DE">DE</button>
              <button class="example-button" data-country="ES">ES</button>
              <button class="example-button" data-country="FR">FR</button>
            </div>
            <div class="code-container">
              <div class="code-header">
                <button id="copyButton" class="copy-button">Copy</button>
              </div>
              <div class="code-content">
                <div class="line-numbers"></div>
                <pre id="auth-data-example"></pre>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Keep only this bottom counter -->
        <div class="stat-counter">
          <a href="https://www.freecounterstat.com" title="hit counter">
            <img src="https://counter6.optistats.ovh/private/freecounterstat.php?c=1t8983zz8nzejxnq9lf3qh4tg4ug4d64" border="0" title="hit counter" alt="hit counter">
          </a>
        </div>
      </div>
    </div>
  
    <script>
      (function() {
        // Initialize all components
        setupInit();
        setupLoad();
        setupAuthorize();
        setupAuthExample();
  
        // Helper function to update results with visual feedback
        function updateResults (element, message) {
          element.innerHTML = message;
          element.classList.add('updated');
          setTimeout(function() { 
            element.classList.remove("updated");
          }, 150); 
        }
  
        // Setup initialization functionality
        function setupInit () {
          var clientToken = document.getElementById("client-token"); 
          var initButton = document.getElementById("init");
          var initRequest = document.getElementById("init-request");
          var initResults = document.getElementById("init-results");
          
          initButton.addEventListener("click", function(event) {      
            try {
              const request = {
                client_token: clientToken.value
              };
              // Show the actual SDK call format
              updateResults(initRequest, 
                `Klarna.Payments.init({
  client_token: "${clientToken.value}"
});`);
              // Initialize Klarna Payments
              Klarna.Payments.init(request);
              updateResults(initResults, "init OK");
            } catch (e) {
              updateResults(initResults, e);
            }
          });
        };
  
        // Setup load payment methods functionality
        function setupLoad () {
          var loadPaymentMethodCategory = document.getElementById("load-payment-method-category"); 
          var loadSessionData = document.getElementById("optional-load-session-data");
          var loadButton = document.getElementById("load");
          var loadRequest = document.getElementById("load-request");
          var loadResults = document.getElementById("load-results");
          
          loadButton.addEventListener("click", function(event) {
            try {
              const sessionData = loadSessionData.value ? JSON.parse(loadSessionData.value) : undefined;
              // Show the actual SDK call format
              updateResults(loadRequest, 
                `Klarna.Payments.load({
  container: "#klarna-payments-container",
  payment_method_category: "${loadPaymentMethodCategory.value || ''}"
},
${sessionData ? JSON.stringify(sessionData, null, 2) : 'undefined'},
function(response) {
  // Handle the response
});`);
              
              Klarna.Payments.load(
                {
                  container: '#klarna-payments-container',
                  payment_method_category: loadPaymentMethodCategory.value || undefined
                },
                sessionData,
                function(data) {
                  updateResults(loadResults, JSON.stringify(data, null, "  "));
                }
              );
            } catch (e) {
              updateResults(loadResults, e);
            }
          });
        };
  
        // Setup authorization functionality
        function setupAuthorize () {
          var authorizePaymentMethodCategory = document.getElementById("authorize-payment-method-category"); 
          var authorizeSessionData = document.getElementById("optional-authorize-session-data");
          var authorizeButton = document.getElementById("authorize");
          var authorizeRequest = document.getElementById("authorize-request");
          var authorizeResults = document.getElementById("authorize-results");
          
          authorizeButton.addEventListener("click", function(event) {      
            try {
              const sessionData = authorizeSessionData.value ? JSON.parse(authorizeSessionData.value) : undefined;
              
              // Show the actual SDK call format with formatted session data
              const methodCall = `Klarna.Payments.authorize({
    payment_method_category: "${authorizePaymentMethodCategory.value || ''}"
}, 
${JSON.stringify(sessionData, null, 2)}, 
function(res) {
    // Handle callback
});`;
              
              updateResults(authorizeRequest, methodCall);
              
              // Make the actual call
              Klarna.Payments.authorize(
                {
                  payment_method_category: authorizePaymentMethodCategory.value || undefined
                },
                sessionData,
                function(data) {
                  updateResults(authorizeResults, JSON.stringify(data, null, "  "));
                }
              );
            } catch (e) {
              updateResults(authorizeResults, e);
            }
          });
        };
  
        // Setup example authorization data
        function setupAuthExample() {
          const usExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "t2@yahoo.com",
              "street_address": "6798-6700 Edmonton Ave",
              "postal_code": "92122",
              "city": "San Diego",
              "region": "CA",
              "phone": "2155555555",
              "country": "US"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "t2@yahoo.com",
              "street_address": "6798-6700 Edmonton Ave",
              "postal_code": "92122",
              "city": "San Diego",
              "region": "CA",
              "phone": "2155555555",
              "country": "US"
            },
            "purchase_country": "US",
            "purchase_currency": "USD",
            "locale": "en-US",
            "merchant_reference1": "Regular Order ID",
            "merchant_reference2": "Big Ticket Order ID",
            "order_amount": 8500,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Item Description",
                "image_url": "https://host/image.jpg",
                "product_url": "https://host/page",
                "quantity": 1,
                "unit_price": 9500,
                "tax_rate": 0,
                "total_amount": 9500,
                "total_discount_amount": 0,
                "total_tax_amount": 0
              },
              {
                "type": "discount",
                "name": "Discount Coupon",
                "quantity": 1,
                "unit_price": -1000,
                "tax_rate": 0,
                "total_amount": -1000,
                "total_discount_amount": 0,
                "total_tax_amount": 0
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"Argos Tottenham Court Road\",\"store_terminal_id\":\"POS1232\",\"store_address\": {\"street_address\":\"216-217 Tottenham Ct Rd\",\"postal_code\": \"W1T 7PT\",\"city\": \"London\",\"country\": \"GB\"}}}]}"
            }
          };

          const gbExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.co.uk",
              "street_address": "216-217 Tottenham Ct Rd",
              "postal_code": "W1T 7PT",
              "city": "London",
              "phone": "+442012345678",
              "country": "GB"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.co.uk",
              "street_address": "216-217 Tottenham Ct Rd",
              "postal_code": "W1T 7PT",
              "city": "London",
              "phone": "+442012345678",
              "country": "GB"
            },
            "purchase_country": "GB",
            "purchase_currency": "GBP",
            "locale": "en-GB",
            "merchant_reference1": "GB12345",
            "merchant_reference2": "GBREF89012",
            "order_amount": 8500,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Running Shoes",
                "quantity": 1,
                "unit_price": 9500,
                "tax_rate": 0,
                "total_amount": 9500,
                "total_tax_amount": 0,
                "total_discount_amount": 0
              },
              {
                "type": "discount",
                "name": "Discount Coupon",
                "quantity": 1,
                "unit_price": -1000,
                "tax_rate": 0,
                "total_amount": -1000,
                "total_tax_amount": 0,
                "total_discount_amount": 1000
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"Argos Tottenham Court Road\",\"store_terminal_id\":\"POS1232\",\"store_address\": {\"street_address\":\"216-217 Tottenham Ct Rd\",\"postal_code\": \"W1T 7PT\",\"city\": \"London\",\"country\": \"GB\"}}}]}"
            }
          };

          const seExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.se",
              "street_address": "Klarabergsgatan 50",
              "postal_code": "111 21",
              "city": "Stockholm",
              "phone": "+46701234567",
              "country": "SE"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.se",
              "street_address": "Klarabergsgatan 50",
              "postal_code": "111 21",
              "city": "Stockholm",
              "phone": "+46701234567",
              "country": "SE"
            },
            "purchase_country": "SE",
            "purchase_currency": "SEK",
            "locale": "sv-SE",
            "merchant_reference1": "SE12345",
            "merchant_reference2": "SEREF89012",
            "order_amount": 85000,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Löparskor",
                "quantity": 1,
                "unit_price": 95000,
                "tax_rate": 0,
                "total_amount": 95000,
                "total_tax_amount": 0,
                "total_discount_amount": 0
              },
              {
                "type": "discount",
                "name": "Rabattkupong",
                "quantity": 1,
                "unit_price": -10000,
                "tax_rate": 0,
                "total_amount": -10000,
                "total_tax_amount": 0,
                "total_discount_amount": 10000
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"Åhléns City Stockholm\",\"store_terminal_id\":\"POS8901\",\"store_address\": {\"street_address\":\"Klarabergsgatan 50\",\"postal_code\": \"111 21\",\"city\": \"Stockholm\",\"country\": \"SE\"}}}]}"
            }
          };

          const deExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.de",
              "street_address": "Alexanderplatz 9",
              "postal_code": "10178",
              "city": "Berlin",
              "phone": "+49301234567",
              "country": "DE"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.de",
              "street_address": "Alexanderplatz 9",
              "postal_code": "10178",
              "city": "Berlin",
              "phone": "+49301234567",
              "country": "DE"
            },
            "purchase_country": "DE",
            "purchase_currency": "EUR",
            "locale": "de-DE",
            "merchant_reference1": "DE12345",
            "merchant_reference2": "DEREF89012",
            "order_amount": 8500,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Laufschuhe",
                "quantity": 1,
                "unit_price": 9500,
                "tax_rate": 0,
                "total_amount": 9500,
                "total_tax_amount": 0,
                "total_discount_amount": 0
              },
              {
                "type": "discount",
                "name": "Rabatt-Coupon",
                "quantity": 1,
                "unit_price": -1000,
                "tax_rate": 0,
                "total_amount": -1000,
                "total_tax_amount": 0,
                "total_discount_amount": 1000
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"Kaufhof Berlin\",\"store_terminal_id\":\"POS3456\",\"store_address\": {\"street_address\":\"Alexanderplatz 9\",\"postal_code\": \"10178\",\"city\": \"Berlin\",\"country\": \"DE\"}}}]}"
            }
          };

          const itExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.it",
              "street_address": "Via del Corso 12",
              "postal_code": "00187",
              "city": "Roma",
              "phone": "+390612345678",
              "country": "IT"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.it",
              "street_address": "Via del Corso 12",
              "postal_code": "00187",
              "city": "Roma",
              "phone": "+390612345678",
              "country": "IT"
            },
            "purchase_country": "IT",
            "purchase_currency": "EUR",
            "locale": "it-IT",
            "merchant_reference1": "IT12345",
            "merchant_reference2": "ITREF89012",
            "order_amount": 8500,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Scarpe da Corsa",
                "quantity": 1,
                "unit_price": 9500,
                "tax_rate": 0,
                "total_amount": 9500,
                "total_tax_amount": 0,
                "total_discount_amount": 0
              },
              {
                "type": "discount",
                "name": "Buono Sconto",
                "quantity": 1,
                "unit_price": -1000,
                "tax_rate": 0,
                "total_amount": -1000,
                "total_tax_amount": 0,
                "total_discount_amount": 1000
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"Rinascente Roma\",\"store_terminal_id\":\"POS1234\",\"store_address\": {\"street_address\":\"Via del Corso 12\",\"postal_code\": \"00187\",\"city\": \"Roma\",\"country\": \"IT\"}}}]}"
            }
          };

          const esExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.es",
              "street_address": "Calle Gran Va 32",
              "postal_code": "28013",
              "city": "Madrid",
              "phone": "+34912345678",
              "country": "ES"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.es",
              "street_address": "Calle Gran Vía 32",
              "postal_code": "28013",
              "city": "Madrid",
              "phone": "+34912345678",
              "country": "ES"
            },
            "purchase_country": "ES",
            "purchase_currency": "EUR",
            "locale": "es-ES",
            "merchant_reference1": "ES12345",
            "merchant_reference2": "ESREF89012",
            "order_amount": 8500,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Zapatillas de Running",
                "quantity": 1,
                "unit_price": 9500,
                "tax_rate": 0,
                "total_amount": 9500,
                "total_tax_amount": 0,
                "total_discount_amount": 0
              },
              {
                "type": "discount",
                "name": "Cupón Descuento",
                "quantity": 1,
                "unit_price": -1000,
                "tax_rate": 0,
                "total_amount": -1000,
                "total_tax_amount": 0,
                "total_discount_amount": 1000
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"El Corte Inglés Madrid\",\"store_terminal_id\":\"POS5678\",\"store_address\": {\"street_address\":\"Calle Gran Vía 32\",\"postal_code\": \"28013\",\"city\": \"Madrid\",\"country\": \"ES\"}}}]}"
            }
          };

          const frExample = {
            "billing_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.fr",
              "street_address": "40 Boulevard Haussmann",
              "postal_code": "75009",
              "city": "Paris",
              "phone": "+33123456789",
              "country": "FR"
            },
            "shipping_address": {
              "given_name": "John",
              "family_name": "Doe",
              "email": "john.doe@email.fr",
              "street_address": "40 Boulevard Haussmann",
              "postal_code": "75009",
              "city": "Paris",
              "phone": "+33123456789",
              "country": "FR"
            },
            "purchase_country": "FR",
            "purchase_currency": "EUR",
            "locale": "fr-FR",
            "merchant_reference1": "FR12345",
            "merchant_reference2": "FRREF89012",
            "order_amount": 8500,
            "order_tax_amount": 0,
            "order_lines": [
              {
                "type": "physical",
                "reference": "123456",
                "name": "Chaussures de Course",
                "quantity": 1,
                "unit_price": 9500,
                "tax_rate": 0,
                "total_amount": 9500,
                "total_tax_amount": 0,
                "total_discount_amount": 0
              },
              {
                "type": "discount",
                "name": "Bon de Réduction",
                "quantity": 1,
                "unit_price": -1000,
                "tax_rate": 0,
                "total_amount": -1000,
                "total_tax_amount": 0,
                "total_discount_amount": 1000
              }
            ],
            "attachment": {
              "content_type": "application/vnd.klarna.internal.emd-v2+json",
              "body": "{\"in_store_payment\": [{\"store_info\": {\"merchant_store_id\":\"Galeries Lafayette Paris\",\"store_terminal_id\":\"POS9012\",\"store_address\": {\"street_address\":\"40 Boulevard Haussmann\",\"postal_code\": \"75009\",\"city\": \"Paris\",\"country\": \"FR\"}}}]}"
            }
          };

          const examples = {
            IT: itExample,
            US: usExample,
            GB: gbExample,
            SE: seExample,
            DE: deExample,
            ES: esExample,
            FR: frExample
          };

          const authDataExampleElement = document.getElementById("auth-data-example");
          const buttons = document.querySelectorAll('.example-button');

          // Show initial example (US)
          authDataExampleElement.innerHTML = JSON.stringify(examples.US, null, "  ");

          // Add click handlers for buttons
          buttons.forEach(button => {
            button.addEventListener('click', () => {
              const country = button.dataset.country;
              if (examples[country]) {
                // Update active button
                buttons.forEach(b => b.classList.remove('active'));
                button.classList.add('active');
                // Show selected example
                authDataExampleElement.innerHTML = JSON.stringify(examples[country], null, "  ");
                updateLineNumbers();
              }
            });
          });

          // Initial line numbers
          updateLineNumbers();
        }

        document.getElementById('copyButton').addEventListener('click', function() {
          const exampleText = document.getElementById('auth-data-example').textContent;
          navigator.clipboard.writeText(exampleText)
            .then(() => {
              this.textContent = 'Copied!';
              setTimeout(() => {
                this.textContent = 'Copy';
              }, 1500);
            })
            .catch(err => {
              console.error('Failed to copy text: ', err);
            });
        });

        // Update setupAuthExample to include line numbers
        function updateLineNumbers() {
          const example = document.getElementById('auth-data-example');
          const lineNumbers = document.querySelector('.line-numbers');
          const lines = example.textContent.split('\n');
          // Pad the numbers with spaces for alignment
          const maxLength = lines.length.toString().length;
          lineNumbers.innerHTML = lines
            .map((_, i) => (i + 1).toString().padStart(maxLength, ' '))
            .join('\n');
        }
      })();
    </script>
  
    <!-- Load Klarna Payments API -->
    <script src="https://x.klarnacdn.net/kp/lib/v1/api.js" async></script>
  </body>
  
  </html>
  